///////////////////////////////////////////////////////////////////////////////
//
// Files
//
///////////////////////////////////////////////////////////////////////////////

//// IMPORTS //////////////////////////////////////////////////////////////////

import { domEventBus } from '../streams/domEvent';
import { uploadStream } from '../streams/socket';

///////////////////////////////////////////////////////////////////////////////

// :: EventStream
let dropStream = domEventBus.filter(e => e.type === 'drop')
  .doAction('.preventDefault');

let fileListStream = dropStream
  .map('._rawEvent.dataTransfer.files');

fileListStream
  .flatMap(fileList => {
    return uploadStream(fileList);
  })
  .onValue();

///////////////////////////////////////////////////////////////////////////////

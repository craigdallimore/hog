///////////////////////////////////////////////////////////////////////////////
//
// Server socket
//
///////////////////////////////////////////////////////////////////////////////

import socketIO from 'socket.io';
import { server } from './server';
import bacon from 'baconjs';

let io = socketIO.listen(server);
let socketBus = new bacon.Bus();

io.on('connection', socket => socketBus.push(socket));

io.on('disconnect', () => {
  socketBus.push(bacon.End());
});

export default socketBus;

///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//
// Server socket
//
///////////////////////////////////////////////////////////////////////////////

import socketIO from 'socket.io';
import { server } from '../server';
import { End, Bus } from 'baconjs';

let io = socketIO.listen(server);
let socketBus = new Bus();

io.on('connection', socket => socketBus.push(socket));

io.on('disconnect', () => {
  socketBus.push(End());
});

export default socketBus;

///////////////////////////////////////////////////////////////////////////////
